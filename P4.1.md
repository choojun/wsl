
PRACTICAL 4.1 Redis

~~~ As the user student ~~~

Installing the Redis Server
Reference

Install Redis
$ sudo apt update
$ sudo apt install redis-server


Configure Redis

Edit the Redis configuration file
$ sudo nano /etc/redis/redis.conf
Find the supervised directive and set this to systemd to allow redis to be managed as a service:

Restart the Redis service to reflect the changes you made to the configuration file:
$ sudo systemctl restart redis-server

Redis CLI

Invoke the Redis CLI
$ redis-cli

Test the connectivity to the Redis server
127.0.0.1:6379> ping
PONG

Set a key-value pair
127.0.0.1:6379> set test "It's working!"
OK

Retrieve the value
127.0.0.1:6379> get test
"It's working!"

To exit from the Redis CLI
127.0.0.1:6379> exit


Using the Python redis Library
~~~ As the user student ~~~ 
Install the redis library in your virtual environment
(.de_venv) $ pip install redis

Create a Jupyter notebook and test the redis library
Reference

import redis

# Create a connection to the Redis server
r = redis.Redis(host='localhost', port=6379, db=0)

# Set a key-value pair
r.set('mykey', 'myvalue')

# Retrieve the value of the key
value = r.get('mykey')
print(value.decode('utf-8'))  # Outputs: myvalue

# Set multiple key-value pairs
r.mset({"key1": "value1", "key2": "value2"})

# Get multiple values using their keys
values = r.mget(["key1", "key2"])
for val in values:
   print(val.decode('utf-8'))

# Delete a key-value pair
r.delete('mykey')

# Check if a key exists
exists = r.exists('mykey')
print(exists)  # Outputs: 0



Saving and Retrieving Objects 
Download user_profile.py from the Classroomâ€™s de folder
Add the following code to your Jupyter Notebook:

import pickle
from user_profile import UserProfile

user_profile = UserProfile(1234, "Hobbes", "hobbes@cartoons.com")
pickled_profile = pickle.dumps(user_profile)
r.set(user_profile.user_id, pickled_profile)
search_obj = r.get(1234)
unpickled_obj = pickle.loads(search_obj)
print(unpickled_obj.to_string())
